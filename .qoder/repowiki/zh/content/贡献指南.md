# 贡献指南

<cite>
**本文档中引用的文件**  
- [README.md](file://README.md)
- [README-new.md](file://README-new.md)
- [package.json](file://package.json)
- [eslint.config.ts](file://eslint.config.ts)
- [vite.config.ts](file://vite.config.ts)
</cite>

## 目录
1. [简介](#简介)
2. [开发环境准备](#开发环境准备)
3. [代码贡献流程](#代码贡献流程)
4. [代码风格与格式化](#代码风格与格式化)
5. [提交信息规范](#提交信息规范)
6. [功能开发工作流](#功能开发工作流)
7. [Bug修复工作流](#bug修复工作流)
8. [文档更新工作流](#文档更新工作流)
9. [Pull Request审查流程](#pull-request审查流程)
10. [问题反馈与社区沟通](#问题反馈与社区沟通)

## 简介
本指南旨在为外部和内部团队成员提供清晰的开发贡献指引，帮助您快速融入项目开发流程。专利服务网站是一个基于Vue 3和TypeScript的现代化专利服务平台，支持专利检索、技术方案分析、三性分析、专利撰写和答辩支持等核心功能。

**Section sources**
- [README-new.md](file://README-new.md#L1-L230)

## 开发环境准备
在开始贡献代码之前，请确保您的开发环境满足以下要求：

- **Node.js**: 版本要求为 `^20.19.0 || >=22.12.0`，请确保安装符合版本要求的Node.js环境。
- **npm**: 推荐使用npm 10.0.0及以上版本进行依赖管理。

### 安装项目依赖
```bash
npm install
```

### 启动开发服务器
```bash
npm run dev
```
项目将在 `http://localhost:5180` 启动，支持热重载功能。

### 构建生产版本
```bash
npm run build
```

### 运行测试
```bash
npm run test           # 运行测试
npm run test:ui        # 启动测试UI界面
npm run test:run       # 单次运行测试
npm run test:coverage  # 生成测试覆盖率报告
```

**Section sources**
- [package.json](file://package.json#L0-L54)
- [README-new.md](file://README-new.md#L150-L170)

## 代码贡献流程
遵循以下标准流程进行代码贡献，以确保代码质量和协作效率：

1. **Fork仓库**：在GitHub上Fork本项目仓库到您的个人账户。
2. **克隆代码**：将Fork后的仓库克隆到本地。
   ```bash
   git clone https://github.com/your-username/patent-service-website.git
   ```
3. **创建功能分支**：基于主分支创建新的功能分支，命名规范为 `feature/功能描述`、`bugfix/问题描述` 或 `docs/文档描述`。
   ```bash
   git checkout -b feature/amazing-feature
   ```
4. **编写代码**：实现功能或修复问题，确保代码符合项目风格要求。
5. **提交更改**：使用符合规范的commit message提交代码。
   ```bash
   git commit -m "feat: 添加用户登录功能"
   ```
6. **推送代码**：将本地分支推送到远程仓库。
   ```bash
   git push origin feature/amazing-feature
   ```
7. **创建Pull Request**：在GitHub上从您的分支向主仓库的main分支发起Pull Request。

**Section sources**
- [README-new.md](file://README-new.md#L200-L215)

## 代码风格与格式化
本项目采用严格的代码风格规范，确保代码一致性和可维护性。

### ESLint配置
项目使用ESLint进行代码质量检查，集成Vue 3和TypeScript的最佳实践。主要配置包括：
- 使用 `@vue/eslint-config-typescript` 提供TypeScript支持
- 使用 `@vue/eslint-config-prettier` 禁用与Prettier冲突的规则
- 检查 `.ts`、`.mts`、`.tsx` 和 `.vue` 文件

运行代码检查：
```bash
npm run lint
```

### Prettier格式化
项目使用Prettier进行代码格式化，确保代码风格统一。配置已集成到ESLint中。

格式化代码：
```bash
npm run format
```

### TypeScript类型检查
使用vue-tsc进行类型检查，确保类型安全。

运行类型检查：
```bash
npm run type-check
```

**Section sources**
- [eslint.config.ts](file://eslint.config.ts#L0-L22)
- [package.json](file://package.json#L0-L54)

## 提交信息规范
为保持提交历史的清晰和可追溯性，请遵循以下提交信息格式：

### 提交类型
- `feat`: 新功能
- `fix`: Bug修复
- `docs`: 文档更新
- `style`: 代码格式调整（不影响逻辑）
- `refactor`: 代码重构
- `test`: 测试相关
- `chore`: 构建过程或辅助工具变动

### 提交信息格式
```
<类型>: <简短描述>

<详细描述>

<关联的Issue或PR>
```

### 示例
```
feat: 实现用户登录功能

- 添加登录表单组件
- 集成认证服务
- 实现Token持久化存储

Closes #123
```

```
fix: 修复专利检索结果分页问题

- 修正分页参数传递错误
- 添加分页状态管理

Fixes #156
```

**Section sources**
- [README-new.md](file://README-new.md#L200-L215)

## 功能开发工作流
开发新功能时，请遵循以下工作流：

1. **需求确认**：在创建Pull Request前，建议先通过GitHub Issues讨论功能需求。
2. **分支创建**：创建以 `feature/` 开头的功能分支。
   ```bash
   git checkout -b feature/user-profile
   ```
3. **代码实现**：
   - 遵循Vue 3组合式API规范
   - 使用TypeScript定义类型
   - 在 `src/services` 中添加API服务
   - 在 `src/stores` 中管理状态
   - 在 `src/views` 中创建页面组件
4. **单元测试**：为新功能编写相应的单元测试，测试文件放在 `tests/` 目录下。
5. **文档更新**：更新相关文档，包括README和功能说明文档。
6. **代码检查**：运行 `npm run lint` 和 `npm run type-check` 确保代码质量。
7. **提交和推送**：按照提交信息规范提交代码并推送到远程分支。
8. **创建PR**：在GitHub上创建Pull Request，关联相关Issue。

**Section sources**
- [src/services/http.ts](file://src/services/http.ts#L0-L248)
- [src/stores/auth.ts](file://src/stores/auth.ts#L0-L262)
- [src/router/index.ts](file://src/router/index.ts#L0-L293)

## Bug修复工作流
修复Bug时，请遵循以下流程：

1. **问题确认**：在GitHub Issues中查找或创建相关问题。
2. **分支创建**：创建以 `bugfix/` 开头的修复分支。
   ```bash
   git checkout -b bugfix/login-error
   ```
3. **问题定位**：使用调试工具定位问题根源。
4. **代码修复**：实现修复方案，确保不引入新的问题。
5. **测试验证**：
   - 运行相关单元测试
   - 手动验证修复效果
   - 确保相关功能正常工作
6. **代码检查**：运行 `npm run lint` 确保代码风格一致。
7. **提交信息**：使用 `fix:` 前缀提交修复。
   ```bash
   git commit -m "fix: 修复登录时Token解析错误"
   ```
8. **创建PR**：推送代码并创建Pull Request，关联原始Issue。

**Section sources**
- [README-new.md](file://README-new.md#L200-L215)
- [src/services/http.ts](file://src/services/http.ts#L0-L248)

## 文档更新工作流
更新项目文档时，请遵循以下指南：

1. **分支创建**：创建以 `docs/` 开头的文档分支。
   ```bash
   git checkout -b docs/update-contribution-guide
   ```
2. **文档分类**：
   - `README.md` 和 `README-new.md`：项目概述和快速入门
   - API文档：各功能模块的API集成说明
   - 修复指南：已知问题和解决方案
3. **内容要求**：
   - 使用清晰简洁的语言
   - 包含必要的代码示例
   - 保持信息准确和最新
4. **格式规范**：
   - 使用Markdown语法
   - 保持一致的标题层级
   - 代码块标注语言类型
5. **提交信息**：使用 `docs:` 前缀。
   ```bash
   git commit -m "docs: 更新贡献指南"
   ```
6. **创建PR**：推送文档更新并创建Pull Request。

**Section sources**
- [README.md](file://README.md#L0-L48)
- [README-new.md](file://README-new.md#L0-L230)

## Pull Request审查流程
所有Pull Request都需要经过审查才能合并，确保代码质量和项目稳定性。

### 审查标准
1. **功能完整性**：实现的功能是否完整，是否满足需求。
2. **代码质量**：
   - 是否符合代码风格规范
   - 是否有冗余或重复代码
   - 是否有潜在的性能问题
3. **测试覆盖**：是否有相应的单元测试，测试是否充分。
4. **文档更新**：相关文档是否同步更新。
5. **安全性**：是否存在安全漏洞。

### 审查流程
1. **自动检查**：PR创建后，CI系统会自动运行：
   - 代码风格检查
   - 类型检查
   - 单元测试
2. **人工审查**：至少需要一位核心成员审查通过。
3. **修改反馈**：根据审查意见进行修改。
4. **最终合并**：所有检查通过后，由核心成员合并代码。

### 最佳实践
- PR描述中清晰说明变更内容和目的
- 尽量保持PR小巧，专注于单一功能或修复
- 及时响应审查反馈
- 不要强制推送（force push）到已审查的分支

**Section sources**
- [README-new.md](file://README-new.md#L200-L215)
- [package.json](file://package.json#L0-L54)

## 问题反馈与社区沟通
我们鼓励社区成员积极参与项目，共同提升产品质量。

### 问题反馈渠道
- **GitHub Issues**：报告Bug、提出功能建议或讨论技术问题。
  - Bug报告：提供详细的复现步骤、预期行为和实际行为
  - 功能请求：说明需求背景和使用场景
  - 技术讨论：提出架构或实现方案的改进建议
- **邮箱联系**：对于敏感或私密问题，可通过 support@patent-service.com 联系。

### 沟通准则
1. **尊重他人**：保持礼貌和专业，尊重不同意见。
2. **清晰表达**：提供充分的上下文信息，避免模糊描述。
3. **及时响应**：对他人的问题或反馈及时回应。
4. **建设性反馈**：提出改进建议时，提供可行的解决方案。

### 社区参与
- 参与问题讨论，分享您的见解
- 帮助解答其他开发者的问题
- 贡献代码或文档
- 参与功能设计讨论

我们致力于营造一个开放、包容、互助的开发社区，欢迎您的参与！

**Section sources**
- [README-new.md](file://README-new.md#L220-L230)